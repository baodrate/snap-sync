'\" t
.TH SNAP-SYNC 8 2019-03-15 SNAP-SYNC
.SH NAME
snap-sync \- send incremental btrfs snapshots, keeping track of them with snapper

.SH SYNOPSIS
snap-sync [-c <config>] [-d <desc>] [-n] [-r <address>] [-s <subvolid>] [-u UUID]

.SH DESCRIPTION

This program sends incremental snapshots to another drive for backing up data. Plug in
and mount any btrfs-formatted device you want your system to be backed up to (like a
USB drive). When you run the script you will be prompted to select a mounted btrfs
device, or you can optionally select the disk using its UUID on the command line.

The script iterates through all snapper configurations by default (this can be changed
using the \fI-c\fR flag). For each configuration it creates a new local snapshot. If you
have never synced to the specified device you will be prompted to enter a directory on
the device where the backup snapshots will go. Additionally you are shown the location
of the backed up snapshot. If you have performed a backup to this device before, only
the changes since the last backup have to be sent.

.SH OPTIONS

\fB\-c, \-\-config\fR <config>    
.RS 4
Specify the snapper configuration to use. Otherwise will perform for each snapper
configuration. Can list multiple configurations within quotes, space-separated (e.g. -c
"root home").  
.RE
.PP

\fB\-d, \-\-description\fR <desc> 
.RS 4
Change the snapper description. Default: "latest incremental backup"
.RE
.PP

\fB\-h, \-\-help\fR
.RS 4
Print the help message.
.RE
.PP

\fB\-n, \-\-noconfirm
.RS 4
Do not ask for confirmation for each configuration. Will still prompt for backup
directory name on first backup.
.RE
.PP

\fB\-p, \-\-port\fR <port>
.RS 4
The remote port. Used with '--remote'.
.RE
.PP

\fB\-r, \-\-remote\fR <address>
.RS 4
Send the snapshot backup to a remote machine. The snapshot will be sent via ssh.  Yous
hould specify the remote machine's hostname or ip address. The 'root' user must be
permitted to login on the remote machine.
.RE
.PP

\fB\-s, \-\-subvolid\fR <subvolid>
.RS 4
Specify the subvolume id of the mounted BTRFS subvolume to back up to. Defaults to 5.
.RE
.PP

\fB\-u, \-\-UUID\fR <UUID>
.RS 4
Specify the UUID of the mounted BTRFS subvolume to back up to. Otherwise will prompt.
If multiple mount points are found with the same UUID and subvolid, will prompt user.
.RE
.PP

.SH EXAMPLES
.PP
snap-sync
.RS 4
Get prompted interactively on what disks to backup to and what snapshots to send.
.RE

.PP
snap-sync --UUID 7360922b-c916-4d9f-a670-67fe0b91143c --subvolid 5 --noconfirm
.RS 4
Specify the UUID and subvolume of the external disk, backing up all subvolumes with a
snapper configuration without promptin for confirmation.
.RE

.SH HOMEPAGE
https://github.com/wesbarnett/snap-sync

.SH AUTHORS
Wes Barnett <wes@wbarnett.us>

.SH SEE ALSO
.BR btrfs-send (8),
.BR snapper (8),
